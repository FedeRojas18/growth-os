# Growth OS v3.1 Architecture Proposal

> **This document proposes skill-integrated enhancements to v3.**
> Do not implement until approved.

---

## Summary of Changes from v3.0

v3.1 integrates the following skills into the v3 architecture:

| Skill | Purpose | Integration Point |
|-------|---------|-------------------|
| `document-skills:pdf` | PDF brief + scoreboard generation | Partner Brief, Channel Report |
| `document-skills:pptx` | Slide deck generation | Channel Report |
| `document-skills:xlsx` | Excel/CSV generation | Apollo Exporter, Pipeline exports |
| `vm0-ai/vm0-skills@slack-webhook` | Slack notifications | Notification Layer |
| `andrejones92/canifi-life-os@google-sheets` | Google Sheets API | Pipeline Syncer |

---

## v3.1 Module Updates

### Module 5: Apollo Exporter (Updated)

**v3.0:** Native Python CSV generation
**v3.1:** Use `xlsx` skill for enhanced CSV/Excel generation with validation

```python
# v3.1 approach using xlsx skill
import pandas as pd

# Create DataFrame from targets
df = pd.DataFrame(targets)

# Export to Apollo-compatible CSV
df.to_csv(f'{date}-bitwage-apollo.csv', index=False)

# Also create Excel version with formatting
# (invoke xlsx skill for formatted Excel with column widths)
```

**New Capabilities:**
- Auto-formatted column widths
- Validation formulas for data integrity
- Excel version alongside CSV

---

### Module 7: Partner Brief (Updated)

**v3.0:** Markdown brief + text files
**v3.1:** Professional PDF generation using `pdf` skill

**Workflow:**
1. Generate brief content (native Claude)
2. Create HTML template with professional styling
3. Convert to PDF using reportlab via `pdf` skill
4. Generate LinkedIn/email intro scripts (native)

**Output Structure:**
```
/exports/partners/[partner]/
  â”œâ”€â”€ [partner]-brief.pdf        # Professional one-pager (via pdf skill)
  â”œâ”€â”€ [partner]-intro-linkedin.txt
  â””â”€â”€ [partner]-intro-email.txt
```

**PDF Brief Template Structure:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [PARTNER LOGO PLACEHOLDER]                            â”‚
â”‚                                                        â”‚
â”‚  PARTNER BRIEF: [PARTNER NAME]                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                        â”‚
â”‚  COMPANY OVERVIEW                                      â”‚
â”‚  [1 paragraph description]                             â”‚
â”‚                                                        â”‚
â”‚  WHY THEY MATTER TO US                                 â”‚
â”‚  â€¢ [Bullet 1]                                          â”‚
â”‚  â€¢ [Bullet 2]                                          â”‚
â”‚  â€¢ [Bullet 3]                                          â”‚
â”‚                                                        â”‚
â”‚  WHY WE MATTER TO THEM                                 â”‚
â”‚  â€¢ [Bullet 1]                                          â”‚
â”‚  â€¢ [Bullet 2]                                          â”‚
â”‚  â€¢ [Bullet 3]                                          â”‚
â”‚                                                        â”‚
â”‚  MUTUAL VALUE PROPOSITION                              â”‚
â”‚  [1 sentence]                                          â”‚
â”‚                                                        â”‚
â”‚  KEY CONTACT                                           â”‚
â”‚  [Name] | [Title] | [LinkedIn URL]                     â”‚
â”‚                                                        â”‚
â”‚  RISKS & CONSIDERATIONS                                â”‚
â”‚  â€¢ [Risk 1]                                            â”‚
â”‚  â€¢ [Risk 2]                                            â”‚
â”‚                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Generated by Growth OS v3.1 | [Date]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Module 8: Pipeline Syncer (Updated)

**v3.0:** CSV export for manual Sheets import
**v3.1:** Direct Google Sheets API integration via `google-sheets` skill

**Workflow:**
1. Read current pipeline state from Google Sheets
2. Compare with new targets/state changes
3. Update Sheets directly via API
4. Refresh dashboard formulas

**Configuration Required:**
```yaml
# config/integrations.yaml
google_sheets:
  credentials_file: "~/.config/growth-os/google-credentials.json"
  pipeline_sheet_id: "[SHEET_ID]"
  tabs:
    active_pipeline: "Active Pipeline"
    dashboard: "Dashboard"
    archive: "Archive"
    history: "History"
```

**Fallback:** If credentials not configured, generate CSV for manual import.

---

### Module 9: Channel Report (Updated)

**v3.0:** Markdown outputs + manual PDF/PPTX creation
**v3.1:** Automated multi-surface generation using `pdf` and `pptx` skills

**Workflow:**
1. Aggregate data from pipeline, targets, wins (native)
2. Generate Slack heartbeat markdown (native)
3. Generate PDF scoreboard using `pdf` skill
4. Generate PPTX slide deck using `pptx` skill

**Slack Heartbeat (Native):**
```markdown
ðŸ“Š *Channel Weekly Heartbeat â€” Week of [DATE]*

Scorecard: [X]/5 [âœ…/âš ï¸]
â€¢ Test plan shipped: [âœ“/âœ—]
â€¢ Targets added: [N] (target: 10-15)
â€¢ Pipeline movement: [N] (target: â‰¥3)
â€¢ Partners advanced: [N] (target: 1-2)
â€¢ Report shipped: [âœ“/âœ—]

ðŸŽ¯ Top wins:
â€¢ [Win 1]
â€¢ [Win 2]

ðŸ“ˆ Pipeline: [N] New | [N] Contacted | [N] Replied | [N] Meeting

ðŸ”— [Full scoreboard PDF] | [Live dashboard]
```

**PDF Scoreboard (via pdf skill):**
- One-page visual report
- 5 metrics with color-coded status (green/yellow/red)
- Pipeline funnel visualization
- Wins section with company names
- Next week thesis preview

**PPTX Deck (via pptx skill):**
- Slide 1: Scorecard + Wins
- Slide 2: Pipeline Snapshot + Movement
- Slide 3: Next Week Focus + Asks

---

### New Module: Notification Layer

**v3.0:** Manual handoff via file transfer
**v3.1:** Automated push notifications via `slack-webhook` skill

**Workflow:**
1. Package is generated (BU pack, partner brief, channel report)
2. Determine recipient(s) from `config/stakeholders.yaml`
3. Post to appropriate Slack channel via webhook
4. Optionally send email with attachments

**Configuration Required:**
```yaml
# config/integrations.yaml
slack:
  webhooks:
    bitwage_outbound: "https://hooks.slack.com/services/..."
    teampay_outbound: "https://hooks.slack.com/services/..."
    bitcoin_channel: "https://hooks.slack.com/services/..."
    partner_dm: "https://hooks.slack.com/services/..."
```

**Notification Templates:**

```python
# BU Pack Ready notification
{
    "channel": "bitwage_outbound",
    "text": "ðŸŽ¯ *Bitwage Execution Pack Ready â€” Week of {date}*\n\n{target_count} targets ready for outreach:\n{target_list}\n\nðŸ“Ž Files:\nâ€¢ [Apollo CSV]({csv_link})\nâ€¢ [Messages doc]({messages_link})\n\ncc: @{owner}"
}

# Partner Brief Ready notification
{
    "channel": "partner_dm",
    "text": "ðŸ¤ *Partner Brief Ready: {partner_name}*\n\nOne-page brief + intro scripts attached.\nPartner owner: @{owner}\n\nðŸ“Ž [PDF Brief]({pdf_link})"
}

# Channel Report notification
{
    "channel": "bitcoin_channel",
    "text": "{slack_heartbeat_content}\n\nðŸ“Ž [Scoreboard PDF]({pdf_link}) | [Slides]({pptx_link})"
}
```

**Fallback:** If webhooks not configured, output notification content to console for manual posting.

---

## v3.1 Repo Structure Updates

```
bitcoin-ecosystem-growth-os-v3/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ ...existing modules...
â”‚   â””â”€â”€ notification-layer.md        # NEW: Notification specs
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ ...existing configs...
â”‚   â””â”€â”€ integrations.yaml            # NEW: API credentials + webhooks
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ partner-brief.html           # NEW: HTML template for PDF generation
â”‚   â”œâ”€â”€ channel-scoreboard.html      # NEW: HTML template for PDF generation
â”‚   â”œâ”€â”€ channel-slides/              # NEW: PPTX template files
â”‚   â”‚   â”œâ”€â”€ slide1-scorecard.html
â”‚   â”‚   â”œâ”€â”€ slide2-pipeline.html
â”‚   â”‚   â””â”€â”€ slide3-next-week.html
â”‚   â””â”€â”€ slack-notifications/         # NEW: Slack message templates
â”‚       â”œâ”€â”€ bu-pack-ready.json
â”‚       â”œâ”€â”€ partner-brief-ready.json
â”‚       â””â”€â”€ channel-report.json
â”œâ”€â”€ scripts/                         # NEW: Automation scripts
â”‚   â”œâ”€â”€ generate-partner-brief.py    # Uses pdf skill
â”‚   â”œâ”€â”€ generate-scoreboard.py       # Uses pdf skill
â”‚   â”œâ”€â”€ generate-slides.py           # Uses pptx skill
â”‚   â”œâ”€â”€ sync-pipeline.py             # Uses google-sheets skill
â”‚   â””â”€â”€ send-notifications.py        # Uses slack-webhook skill
â””â”€â”€ ...
```

---

## v3.1 Workflow Changes

### Weekly Cycle with Skills

```
MONDAY
â”œâ”€â”€ Signal Scanner (native + optional firecrawl)
â”œâ”€â”€ Thesis Selector (native)
â””â”€â”€ Target Builder start (native)

TUESDAY
â”œâ”€â”€ Target Builder finish (native)
â”œâ”€â”€ Message Generator (native)
â”œâ”€â”€ Apollo Exporter (xlsx skill)
â”œâ”€â”€ BU Pack Generator (native)
â””â”€â”€ Notification Layer (slack-webhook)  â”€â”€â–º Slack: "BU Pack Ready"

WEDNESDAY
â”œâ”€â”€ Partner Brief (pdf skill)  â”€â”€â–º PDF brief generated
â””â”€â”€ Notification Layer (slack-webhook)  â”€â”€â–º Slack: "Partner Brief Ready"

FRIDAY
â”œâ”€â”€ Pipeline Syncer (google-sheets skill)  â”€â”€â–º Sheets updated
â”œâ”€â”€ Channel Report
â”‚   â”œâ”€â”€ Slack Heartbeat (native)
â”‚   â”œâ”€â”€ PDF Scoreboard (pdf skill)
â”‚   â””â”€â”€ PPTX Slides (pptx skill)
â””â”€â”€ Notification Layer (slack-webhook)  â”€â”€â–º Slack: "Channel Report"
```

---

## v3.1 Implementation Phases

### Phase 1: Core Skills Integration (Week 1)
**Goal:** Integrate already-installed document skills.

1. Create HTML templates for PDF generation
2. Create slide templates for PPTX generation
3. Build `generate-partner-brief.py` script using pdf skill
4. Build `generate-scoreboard.py` script using pdf skill
5. Build `generate-slides.py` script using pptx skill

**No new skills to install.**

---

### Phase 2: Slack Notifications (Week 2)
**Goal:** Add push notification capability.

1. Install slack-webhook skill:
   ```bash
   npx skills add vm0-ai/vm0-skills@slack-webhook -g -y
   ```
2. Obtain Slack webhook URLs from workspace admin
3. Configure `config/integrations.yaml`
4. Build `send-notifications.py` script
5. Integrate into module handoffs

---

### Phase 3: Google Sheets Integration (Week 3)
**Goal:** Direct pipeline sync to Sheets.

1. Install google-sheets skill:
   ```bash
   npx skills add andrejones92/canifi-life-os@google-sheets -g -y
   ```
2. Set up Google Cloud project and service account
3. Configure `config/integrations.yaml` with credentials
4. Build `sync-pipeline.py` script
5. Create Pipeline Tracker template in Google Sheets

---

### Phase 4: Optional Enhancements (Future)
**Goal:** Further automation.

- Firecrawl for signal scanning
- Resend for automated email delivery
- LinkedIn API for target enrichment

---

## Credentials Checklist

Before implementing v3.1, you need:

| Credential | Required For | Phase | How to Obtain |
|------------|--------------|-------|---------------|
| Slack Webhook URLs | Notifications | Phase 2 | Slack Admin > Apps > Incoming Webhooks |
| Google Service Account JSON | Pipeline Sync | Phase 3 | Google Cloud Console > IAM > Service Accounts |
| Google Sheets ID | Pipeline Sync | Phase 3 | From Sheets URL after `/d/` |

---

## Summary: v3.0 vs v3.1

| Capability | v3.0 | v3.1 |
|------------|------|------|
| Partner briefs | Markdown | Professional PDF |
| Channel scoreboard | Markdown | Visual PDF |
| Channel slides | Manual PPTX | Auto-generated PPTX |
| Pipeline sync | CSV â†’ manual import | Direct Sheets API |
| Notifications | File-based handoff | Slack webhooks |
| Excel exports | Basic CSV | Formatted XLSX option |

---

## Questions Before Implementation

See accompanying questions in the main response.
